# 3.2.2 特征提取与筛选

本节介绍了研究中使用的特征提取方法和特征选择策略，这些是构建有效预测模型的关键步骤。

## 特征提取

研究中从三个核心数据集提取了多种类型的特征，主要包括：

### 人口统计学特征

- 年龄、性别、身高、体重、BMI
- 生活习惯特征：吸烟状态、饮酒情况、运动频率

### 临床生理指标

- 血压测量：收缩压、舒张压、平均动脉压、脉压差
- 血液生化指标：血糖、血脂（总胆固醇、LDL-C、HDL-C、甘油三酯）
- 血管评估指标：cfPWV、baPWV、ABI
- 颈动脉超声指标：IMT、动脉壁厚度、斑块评分

### 小米手表衍生特征

- 心率变异性指标：SDNN、RMSSD、pNN50、LF/HF比值
- 活动监测：步数、活动强度、静息比例
- 睡眠质量指标：睡眠效率、深睡眠占比

### 其他衍生特征

- 年龄分层：采用临床意义的年龄分组（<45岁、45-60岁、>60岁）
- BMI分类：依据中国肥胖标准进行BMI分类（低体重、正常、超重、肥胖）
- 风险比值：收缩压/舒张压比值、PWV/年龄比值等

通过特征提取，共获得42个初始特征变量。

## 特征选择

为提高模型的效率和避免过拟合，我们采用多种特征选择方法，筛选出最具预测价值的特征子集。

### 单变量特征选择

使用卡方检验（分类特征）和ANOVA分析（连续特征）评估每个特征与目标变量的相关性：

| 特征 | 统计检验方法 | p值 | 重要性排名 |
|------|------------|-----|-----------|
| 年龄 | ANOVA | <0.001 | 1 |
| baPWV | ANOVA | <0.001 | 2 |
| 收缩压 | ANOVA | <0.001 | 3 |
| BMI | ANOVA | 0.003 | 4 |
| 性别 | 卡方检验 | 0.008 | 5 |

### 多变量特征选择

1. **Lasso回归(L1正则化)**：利用正则化惩罚系数，实现特征自动选择
2. **递归特征消除(RFE)**：从所有特征开始，逐步移除最不重要的特征
3. **基于模型的特征重要性排序**：使用随机森林和XGBoost模型评估特征重要性

下图展示了XGBoost模型得出的主要特征重要性排名：

![特征重要性排名](../../../../output/image/风险预测/PWV超标风险/PWV超标风险_shap_summary_bar.png)

### 特征相关性分析

为避免多重共线性问题，对高度相关的特征进行了相关性分析，相关系数阈值设为0.75：

![特征相关性热图](../../../../output/figures/correlation/correlation_heatmap.png)

当发现高度相关的特征对时（如收缩压与平均动脉压，相关系数为0.92），根据与目标变量的相关度和临床意义，保留其中一个特征。

## 最终选择的特征集

综合多种特征选择方法的结果，最终确定了三组不同的特征集：

### 基础特征集（用于基线模型）

- 年龄、性别、BMI
- 收缩压、舒张压
- 吸烟状态、糖尿病状态

### 临床特征集（用于临床预测模型）

- 基础特征集所有特征
- cfPWV、baPWV
- 颈动脉IMT
- 总胆固醇、LDL-C

### 增强特征集（用于综合预测模型）

- 临床特征集所有特征
- 心率变异性指标（SDNN、LF/HF）
- 活动特征（日均步数、活动强度分级）
- 衍生特征（PWV/年龄比值、收缩压/舒张压比值）

## 特征工程结论

通过系统的特征提取和选择过程，我们筛选出了最具预测价值的特征子集，显著提高了模型的性能和可解释性。最终选定的特征集既考虑了统计学显著性，也兼顾了临床实际意义，为后续模型构建奠定了良好基础。

详细的特征重要性分析可参见以下文件：
- [PWV超标风险特征重要性](../../../../output/tables/PWV超标风险_feature_importance.xlsx)
- [高血压风险特征重要性](../../../../output/tables/高血压风险_feature_importance.xlsx)
- [高综合风险特征重要性](../../../../output/tables/高综合风险_feature_importance.xlsx)

[返回本章目录](./00_index.md)
[返回总目录](../../00_index.md) 